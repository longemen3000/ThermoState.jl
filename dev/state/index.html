<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Thermodynamic State Object (ThermodynamicState) · ThermoState.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://longemen3000.github.io/ThermoState.jl/state/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><script src="../../copy.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">ThermoState.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../spec/">The Specification Object (<code>Spec</code>)</a></li><li class="is-active"><a class="tocitem" href>Thermodynamic State Object (<code>ThermodynamicState</code>)</a><ul class="internal"><li><a class="tocitem" href="#ThermodynamicState"><span><code>ThermodynamicState</code></span></a></li></ul></li><li><a class="tocitem" href="../utils/">Utilities</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../new_model/">Implementing a model using the <code>ThermoState</code> interface</a></li></ul></li><li><a class="tocitem" href="../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Thermodynamic State Object (<code>ThermodynamicState</code>)</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Thermodynamic State Object (<code>ThermodynamicState</code>)</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/longemen3000/ThermoState.jl/blob/master/docs/src/state.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="ThermodynamicState"><a class="docs-heading-anchor" href="#ThermodynamicState"><code>ThermodynamicState</code></a><a id="ThermodynamicState-1"></a><a class="docs-heading-anchor-permalink" href="#ThermodynamicState" title="Permalink"></a></h2><p>A specification is not sufficient to define a system. The <a href="https://en.wikipedia.org/wiki/Phase_rule">Gibbs&#39; Phase Rule</a> specifies that a system in equilibrium has <code>F</code> degrees of freedom, where <code>F = NumberOfComponents - NumberOfPhases + 2</code>. </p><p>The <code>ThermodynamicState</code> struct is a collection of <code>Spec</code>s. When creating this object, the Gibbs&#39; Phase Rule is evaluated on the specification arguments to check its validity. lets see one example: </p><pre><code class="language-julia-repl hljs">julia&gt; a = state(t=300.0,ρ=5u&quot;mol/m^3&quot;)
ThermodynamicState with 2 properties:
  Temperature : 300.0[K]
  Molar density : 5[mol m^-3]
 ```
In this case, neither a phase nor any amount of compounds was specified. In those cases, the function assumes when the system has one mol, one phase, and/or a single component.

Another way to build a `ThermodynamicState` struct is by directly passing `Spec`s as arguments:</code></pre><p>julia-repl  julia&gt;  h0 = spec(mol_h = 3000.0)  t0 = spec(t=401.0)  st = state(h0,t0) julia&gt;  st = state(h0,t0) ThermodynamicState with 2 properties:   Molar enthalpy : 3000.0[J mol^-1]   Temperature : 401.0[K]</p><pre><code class="nohighlight hljs">You can skip the check of the Gibbs&#39; Phase Rule using the `check = false` keyword, or, in the case of building the state using keywords, decide to not normalize units via the 
`normalize_units= false` keyword.

## Obtaining properties from a `ThermodynamicState` struct

As said in the Basics section, you can query properties from the created `ThermodynamicState` struct. the way of obtaining those properties is by calling a property function. The interface proposed by this package is the following:
</code></pre><p>julia prop = property(model::MyModel,state::ThermodynamicState,unit::Unitful.unit=[default],args...)</p><pre><code class="nohighlight hljs">Dispatching on the model type, you can calculate properties from the specifications contained in `state`.
This package exports one single model: `FromState`, that doesn&#39;t calculate (almost) anything, just checks if the selected property is in the argument, and if it is, it returns its numerical (unit stripped) value.
By default, the units of the number returned correspond to SI units, you can obtain a number with appropiate units by passing a corresponding `unit` argument.
the `FromState` model, given a corresponding molecular weight `mw` argument, can calculate derived properties, for example:
</code></pre><p>julia-repl mw = 50 a = state(t=300.0,ρ=5.0u&quot;mol/L&quot;) v = mass_volume(FromSpecs(),a,u&quot;cm^3/g&quot;,mw) 4.0</p><pre><code class="nohighlight hljs">The `mw` argument can be, depending of the situation, a number of vector of number. if not units are provided, a default units of `g/mol` are assumed. this conversion can be done on any unit that accepts molar, total and mass specifications, mass and moles themselves, molar and mass fractions,and molar and mass numbers.

## Variable `ThermodynamicState`s
Sometimes a more direct approach is needed when properties.For example, you may want to create a function that accepts only temperature to pass it to an ODE system or an optimization system. for this purpose, the Singleton `VariableSpec` is provided. if you pass it to a `Spec` or create a `ThermodynamicState` object, the resulting `state` or `spec` will be callable:
</code></pre><p>julia-repl julia&gt; a_t = state(t=VariableSpec(),ρ=5.0u&quot;mol/L&quot;) ThermodynamicState(x₁) with 2 properties:   Temperature : x₁   Molar density : 5000.0[mol m^-3]</p><p>julia&gt; a_t(300.15) ThermodynamicState with 2 properties:   Temperature : 300.15[K]   Molar density : 5000.0[mol m^-3]</p><pre><code class="nohighlight hljs">up to 3 `VariableSpec` can be added to each `ThermodynamicState`. a spec can only have one `VariableSpec` 

Its important to note that the functor created accepts the arguments in the same order as the arguments passed to the state function. for example,  `st = state(t=VariableSpec(),P=VariableSpec())` will return a functor of the form `st(t,p)` whereas `st = state(P=VariableSpec(),t=VariableSpec())` will create a functor with reversed order: `st(p,t)`

## Dispatching on the state type with `state_type`

Good. we now have a struct designed to store thermodynamic properties. now we can create functions that dispatch on a specific combination of thermodynamic specifications, using the function `state_type(st::ThermodynamicState)`:
</code></pre><p>julia-repl julia&gt; st = state(t=373.15,ρ=5.0u&quot;mol/L&quot;);state_type(st) (VolumeAmount{MOLAR,DENSITY}(), Temperature(), SingleComponent())        </p><pre><code class="nohighlight hljs">This tuple of thermodynamic specifications are an ordered representation of the specifications contained:</code></pre><p>julia-repl st1 = state(t=373.15,ρ=5.0u&quot;mol/L&quot;) st2 = state(ρ=5.0u&quot;mol/m^3&quot;,t=373.15,normalize<em>units=false) state</em>type(s1) === state_type(s2) #true ``<code>Some abstract tuple types are saved on</code>ThermoState.QuickStates`. the tuple types exported are:</p><ul><li><code>SinglePT,MultiPT</code></li><li><code>SingleVT,MultiVT</code></li><li><code>SinglePV,MultiPV</code></li><li><code>SinglePS,MultiPS</code></li><li><code>SinglePH,MultiPH</code></li><li><code>SingleSatT,MultiSatT</code> (Two phase equilibrium)</li><li><code>SingleSatP,MultiSatP</code></li><li><code>SingleΦT,MultiΦT</code>  (vapor fraction, general)</li><li><code>SingleΦP,MultiΦP</code></li><li><code>SingleΦmT,MultiΦmT</code> (mass vapor fraction, or quality)</li><li><code>SingleΦmP,MultiΦmP</code></li><li><code>SingleΦnT,MultiΦnT</code>(molar vapor fraction)</li><li><code>SingleΦnP,MultiΦnP</code></li><li><code>SingleT,MultiT</code> (a state that has a temperature)</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../spec/">« The Specification Object (<code>Spec</code>)</a><a class="docs-footer-nextpage" href="../utils/">Utilities »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.12 on <span class="colophon-date" title="Wednesday 26 January 2022 21:02">Wednesday 26 January 2022</span>. Using Julia version 1.6.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
